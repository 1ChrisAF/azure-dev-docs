### YamlMime:FAQ
metadata:
  title: Azure Developer CLI FAQ
  description: Get answers to common questions about Azure Developer CLI.
  author: puicchan
  ms.author: puichan
  ms.date: 04/13/2021
  ms.topic: conceptual
  ms.custom: devx-track-azdev
  ms.prod: azure
title: Common questions about the Azure Developer CLI
summary: This article answers commonly asked questions about the Azure Developer CLI.
sections:
  - name: General
    questions:
      - question: What is environment name?
        answer: |
          The CLI uses the environment name to set the `AZURE_ENV_NAME` environment variable used by azd enabled templates. AZURE_ENV_NAME is also used as a prefix to Azure resource name including the Azure resource group. Since each environment has its own set of configurations, we keep all configuration files under environment folders. 

          ```txt	 
          ├── .Azure                          [ This folder shows up after you run add init or azd up ]
          │   ├── <your environment1>         [Folder to house all environment related configurations]
          │   │   ├── .env                    [ Contains environment variables ]
          │   │   └── main.parameters.json    [ Parameter file ]
          │   └── <your environment2>         [ Folder to house all environment related configurations ]
          │   │   ├── .env                    [ Contains environment variables ]
          │   │   └── main.parameters.json    [ Parameter file ]
          │   └──config.json 
          ```

      - question: Can I set up more than one environment?
        answer: |
          Yes! You can set up different environments (for example, dev, test, prod.) You can use `azd env` to manage environments.

      - question: Where is the environment configuration (.env) file?
        answer: |
          `<your-project-folder-name>\.azure\<your-environment-name>\.env`

      - question: How is the .env file used?
        answer: |
          `azd` commands refer to the .env file for environment configuration. Command like `azd deploy` also updates the .env file with, for example, db connection string and Azure Key Vault end point.
          
      - question: How is azure.yaml used?
        answer: |
          `azure.yaml` describes the application(s) and type of Azure resources included in the template.

  - name: "Command: azd provision"
    questions:
      - question: How does the command know what to provision?
        answer: |
          The command uses Bicep templates found under `<your-project-folder-name>/infra` to provision Azure resources 

      - question: Where can I find what are provisioned in Azure?
        answer: |
          Go to https://portal.azure.com, locate your resource group, which is `<your-environment-name>rg`. 

      - question: How do I find more information about Azure errors?
        answer: |
          We use Bicep templates found under `<your-project-folder-name>/infra` to provision Azure resources and include the error message in the CLI output if issues. 	
          
          You can also go to https://portal.azure.com, locate your resource group, which is `<your-environment-name>rg`. If any of the deployments fail, select error link to get more information.
          
          More resource: [Troubleshoot common Azure deployment errors - Azure Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/troubleshooting/common-deployment-errors)

      - question: Is there a log file for `azd provision`? 
        answer: |
          Coming soon. Feature is planned for future release.

  - name: "Command: azd deploy"
    questions:
      - question: Can I rerun this command?
        answer: |
          Yes.

  - name: "Command: azd up"
    questions:
      - question: Can I rerun `azd up`?
        answer: |
          Yes. We use the [incremental deployment mode](https://docs.microsoft.com/azure/azure-resource-manager/templates/deployment-modes).

      - question: How do I find the log file for `azd up`? 
        answer: |
          Coming soon. Feature is planned for future release.

  - name: "Command: azd pipeline"
    questions:
      - question: What is Azure service principal?
        answer: |
          An Azure service principal is an identity created for use with applications, hosted services, and automated tools to access Azure resources. This access is restricted by the roles assigned to the service principal, giving you control over which resources can be accessed and at which level. Refer to [Connect GitHub and Azure | Microsoft Docs](https://docs.microsoft.com/azure/developer/github/connect-from-azure?tabs=azure-portal%2Cwindows#use-the-azure-login-action-with-a-service-principal-secret) for more on authenticating from Azure to GitHub 

      - question: Do I need to create an Azure service principal before running `azd pipeline config`?
        answer: |
          No. `azd pipeline config` takes care of creating the Azure service principal and performing the necessary steps to store the secrets in your GitHub repo.

      - question: What are all the secrets stored in GitHub?
        answer: |
          The command stores four secrets in GitHub: AZURE_CREDENTIALS, AZURE_ENV_NAME, AZURE_LOCATION and AZURE_SUBSCRIPTION_ID. You can override the value of each secret by going to `https://github.com/<your-GH-account>/<your-repo>/secrets/actions`.

      - question: What is OpenID Connect (OIDC) and is it supported?  
        answer: |
          [OpenID Connect](https://docs.github.com/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect) allows your workflows to exchange short-lived tokens directly from Azure. OIDC support is planned and will be included in future release. 

      - question: How do I reset the Azure service principal stored in GitHub Actions?
        answer: |
          Go to `https://github.com/<your-GH-account>/<your-repo>settings/secrets/actions`, update `AZURE_CREDENTIALS` by copying and pasting the entire JSON object for the new service principal. For example, 

          ```
          {
            "clientId": "<GUID>",
            "clientSecret": "<GUID>",
            "subscriptionId": "<GUID>",
            "tenantId": "<GUID>",
            (...)
          }
          ```

      - question: Where is the GitHub action file?
        answer: |
          `<your-project-folder-name>\.github\workflows\azure-dev.yml`
          
      - question: In `azure-dev.yml` can I deploy just the code in the build step?
        answer: |
          Yes, just replace 
          
          `run: azd up --no-prompt` 
          
          with 
          
          `run: azd deploy --no-prompt`

      - question: Where can I find the log for the GitHub action job I just triggered after running `azd pipeline config`?
        answer: |
          Go to `https://github.com/<your-GH-account>/<your-repo>/actions` and refer to the log file in the workflow run.

